<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recipe Share - 기술적 리스크 분석 대시보드</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #e4e4e4;
      line-height: 1.6;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    .header {
      text-align: center;
      padding: 40px 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }

    .header p {
      color: #a0a0a0;
      font-size: 1.1rem;
    }

    /* Summary Cards */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .summary-card {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 25px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .summary-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .summary-card.critical {
      border-left: 4px solid #ff4757;
    }

    .summary-card.high {
      border-left: 4px solid #ffa502;
    }

    .summary-card.medium {
      border-left: 4px solid #ffd93d;
    }

    .summary-card.low {
      border-left: 4px solid #2ed573;
    }

    .summary-number {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .summary-card.critical .summary-number { color: #ff4757; }
    .summary-card.high .summary-number { color: #ffa502; }
    .summary-card.medium .summary-number { color: #ffd93d; }
    .summary-card.low .summary-number { color: #2ed573; }

    .summary-label {
      color: #a0a0a0;
      font-size: 0.95rem;
      font-weight: 500;
    }

    /* Project Overview */
    .project-overview {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .project-overview h2 {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: #48dbfb;
    }

    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
    }

    .overview-item {
      background: rgba(0, 0, 0, 0.2);
      padding: 15px;
      border-radius: 10px;
    }

    .overview-item .label {
      font-size: 0.85rem;
      color: #888;
      margin-bottom: 5px;
    }

    .overview-item .value {
      font-size: 1.1rem;
      font-weight: 600;
      color: #fff;
    }

    /* Charts Section */
    .charts-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 30px;
      margin-bottom: 30px;
    }

    .chart-container {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 25px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .chart-container h3 {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #feca57;
    }

    .chart-wrapper {
      position: relative;
      height: 300px;
    }

    /* Risk Matrix */
    .risk-matrix {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .risk-matrix h2 {
      font-size: 1.5rem;
      margin-bottom: 25px;
      color: #48dbfb;
    }

    .matrix-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
    }

    .matrix-table th,
    .matrix-table td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .matrix-table th {
      background: rgba(0, 0, 0, 0.3);
      color: #48dbfb;
      font-weight: 600;
      position: sticky;
      top: 0;
    }

    .matrix-table tr:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .risk-id {
      font-weight: 700;
      color: #fff;
      background: rgba(0, 0, 0, 0.3);
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.85rem;
    }

    .severity-badge {
      display: inline-block;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .severity-badge.critical {
      background: rgba(255, 71, 87, 0.2);
      color: #ff4757;
      border: 1px solid #ff4757;
    }

    .severity-badge.high {
      background: rgba(255, 165, 2, 0.2);
      color: #ffa502;
      border: 1px solid #ffa502;
    }

    .severity-badge.medium {
      background: rgba(255, 217, 61, 0.2);
      color: #ffd93d;
      border: 1px solid #ffd93d;
    }

    .severity-badge.low {
      background: rgba(46, 213, 115, 0.2);
      color: #2ed573;
      border: 1px solid #2ed573;
    }

    .category-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 0.8rem;
      background: rgba(72, 219, 251, 0.2);
      color: #48dbfb;
    }

    /* Risk Details */
    .risk-details {
      margin-bottom: 30px;
    }

    .risk-details h2 {
      font-size: 1.5rem;
      margin-bottom: 25px;
      color: #48dbfb;
    }

    .risk-card {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      cursor: pointer;
      transition: all 0.3s;
    }

    .risk-card:hover {
      background: rgba(255, 255, 255, 0.12);
    }

    .risk-card.critical {
      border-left: 4px solid #ff4757;
    }

    .risk-card.high {
      border-left: 4px solid #ffa502;
    }

    .risk-card.medium {
      border-left: 4px solid #ffd93d;
    }

    .risk-card.low {
      border-left: 4px solid #2ed573;
    }

    .risk-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    .risk-card-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .risk-card-title h3 {
      font-size: 1.2rem;
      color: #fff;
    }

    .risk-content {
      display: none;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .risk-card.expanded .risk-content {
      display: block;
    }

    .risk-section {
      margin-bottom: 20px;
    }

    .risk-section h4 {
      font-size: 1rem;
      color: #feca57;
      margin-bottom: 10px;
    }

    .risk-section p,
    .risk-section ul {
      color: #c0c0c0;
      font-size: 0.95rem;
    }

    .risk-section ul {
      list-style: none;
      padding-left: 0;
    }

    .risk-section ul li {
      padding: 5px 0;
      padding-left: 20px;
      position: relative;
    }

    .risk-section ul li::before {
      content: '•';
      position: absolute;
      left: 0;
      color: #48dbfb;
    }

    .code-block {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 10px;
      padding: 15px;
      overflow-x: auto;
      font-family: 'Noto Sans KR', 'Fira Code', monospace;
      font-size: 0.85rem;
      color: #a8d8a8;
      margin-top: 10px;
      white-space: pre;
      line-height: 1.5;
    }

    .toggle-icon {
      font-size: 1.5rem;
      color: #888;
      transition: transform 0.3s;
    }

    .risk-card.expanded .toggle-icon {
      transform: rotate(180deg);
    }

    /* Action Items */
    .action-items {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .action-items h2 {
      font-size: 1.5rem;
      margin-bottom: 25px;
      color: #48dbfb;
    }

    .action-phase {
      margin-bottom: 25px;
    }

    .action-phase h3 {
      font-size: 1.1rem;
      color: #feca57;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .action-phase h3::before {
      content: '';
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .action-phase.immediate h3::before { background: #ff4757; }
    .action-phase.short-term h3::before { background: #ffa502; }
    .action-phase.pre-launch h3::before { background: #2ed573; }

    .action-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }

    .action-table th,
    .action-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .action-table th {
      background: rgba(0, 0, 0, 0.2);
      color: #888;
      font-weight: 500;
    }

    .owner-badge {
      display: inline-block;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      text-align: center;
      line-height: 28px;
      font-weight: 600;
      font-size: 0.85rem;
    }

    /* Monitoring */
    .monitoring {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .monitoring h2 {
      font-size: 1.5rem;
      margin-bottom: 25px;
      color: #48dbfb;
    }

    .metric-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
    }

    .metric-item {
      background: rgba(0, 0, 0, 0.2);
      padding: 20px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .metric-info h4 {
      color: #fff;
      font-size: 1rem;
      margin-bottom: 5px;
    }

    .metric-info p {
      color: #888;
      font-size: 0.85rem;
    }

    .metric-threshold {
      text-align: right;
    }

    .metric-threshold .value {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .metric-threshold .alert {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 10px;
      margin-top: 5px;
      display: inline-block;
    }

    .alert.critical {
      background: rgba(255, 71, 87, 0.2);
      color: #ff4757;
    }

    .alert.warning {
      background: rgba(255, 165, 2, 0.2);
      color: #ffa502;
    }

    /* Conclusion */
    .conclusion {
      background: linear-gradient(135deg, rgba(72, 219, 251, 0.1), rgba(254, 202, 87, 0.1));
      border-radius: 16px;
      padding: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .conclusion h2 {
      font-size: 1.5rem;
      margin-bottom: 25px;
      color: #48dbfb;
    }

    .conclusion-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }

    .conclusion-section h3 {
      font-size: 1.1rem;
      color: #feca57;
      margin-bottom: 15px;
    }

    .conclusion-section ul {
      list-style: none;
      padding: 0;
    }

    .conclusion-section ul li {
      padding: 8px 0;
      padding-left: 25px;
      position: relative;
      color: #c0c0c0;
    }

    .conclusion-section ul li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: #2ed573;
    }

    .conclusion-section.acceptable ul li::before {
      content: '○';
      color: #888;
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 30px;
      color: #666;
      font-size: 0.9rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8rem;
      }

      .charts-section {
        grid-template-columns: 1fr;
      }

      .matrix-table {
        font-size: 0.8rem;
      }

      .matrix-table th,
      .matrix-table td {
        padding: 10px 8px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>Recipe Share 리스크 분석 대시보드</h1>
      <p>기술적 리스크 식별 및 대응 방안 보고서</p>
    </header>

    <!-- Summary Cards -->
    <div class="summary-grid">
      <div class="summary-card critical">
        <div class="summary-number">1</div>
        <div class="summary-label">Critical</div>
      </div>
      <div class="summary-card high">
        <div class="summary-number">3</div>
        <div class="summary-label">High</div>
      </div>
      <div class="summary-card medium">
        <div class="summary-number">4</div>
        <div class="summary-label">Medium</div>
      </div>
      <div class="summary-card low">
        <div class="summary-number">2</div>
        <div class="summary-label">Low</div>
      </div>
    </div>

    <!-- Project Overview -->
    <section class="project-overview">
      <h2>프로젝트 개요</h2>
      <div class="overview-grid">
        <div class="overview-item">
          <div class="label">프로젝트명</div>
          <div class="value">Recipe Share</div>
        </div>
        <div class="overview-item">
          <div class="label">아키텍처</div>
          <div class="value">모노레포 (pnpm)</div>
        </div>
        <div class="overview-item">
          <div class="label">Frontend</div>
          <div class="value">Next.js 14 + TS</div>
        </div>
        <div class="overview-item">
          <div class="label">Backend</div>
          <div class="value">NestJS + Prisma</div>
        </div>
        <div class="overview-item">
          <div class="label">Database</div>
          <div class="value">PostgreSQL + Redis</div>
        </div>
        <div class="overview-item">
          <div class="label">인증</div>
          <div class="value">JWT (Access + Refresh)</div>
        </div>
        <div class="overview-item">
          <div class="label">팀 구성</div>
          <div class="value">풀스택 2명</div>
        </div>
        <div class="overview-item">
          <div class="label">기간</div>
          <div class="value">12주 (3개월)</div>
        </div>
      </div>
    </section>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-container">
        <h3>심각도별 리스크 분포</h3>
        <div class="chart-wrapper">
          <canvas id="severityChart"></canvas>
        </div>
      </div>
      <div class="chart-container">
        <h3>카테고리별 리스크 분포</h3>
        <div class="chart-wrapper">
          <canvas id="categoryChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Risk Matrix -->
    <section class="risk-matrix">
      <h2>리스크 요약 매트릭스</h2>
      <table class="matrix-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>리스크 항목</th>
            <th>발생 가능성</th>
            <th>영향도</th>
            <th>위험 등급</th>
            <th>카테고리</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="risk-id">R1</span></td>
            <td>이미지 업로드 용량/성능 이슈</td>
            <td>높음</td>
            <td>높음</td>
            <td><span class="severity-badge critical">Critical</span></td>
            <td><span class="category-badge">기능</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R2</span></td>
            <td>JWT 토큰 보안 취약점</td>
            <td>중간</td>
            <td>치명적</td>
            <td><span class="severity-badge high">High</span></td>
            <td><span class="category-badge">보안</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R3</span></td>
            <td>PostgreSQL 단일 장애점</td>
            <td>중간</td>
            <td>높음</td>
            <td><span class="severity-badge high">High</span></td>
            <td><span class="category-badge">인프라</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R4</span></td>
            <td>팀 리소스 부족 (2인 개발)</td>
            <td>높음</td>
            <td>중간</td>
            <td><span class="severity-badge high">High</span></td>
            <td><span class="category-badge">일정</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R5</span></td>
            <td>Next.js 14 App Router 학습 곡선</td>
            <td>중간</td>
            <td>중간</td>
            <td><span class="severity-badge medium">Medium</span></td>
            <td><span class="category-badge">기술</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R6</span></td>
            <td>레시피 검색 성능 저하</td>
            <td>중간</td>
            <td>중간</td>
            <td><span class="severity-badge medium">Medium</span></td>
            <td><span class="category-badge">성능</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R7</span></td>
            <td>S3 전환 시 마이그레이션 이슈</td>
            <td>낮음</td>
            <td>중간</td>
            <td><span class="severity-badge medium">Medium</span></td>
            <td><span class="category-badge">인프라</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R8</span></td>
            <td>Prisma ORM 성능 한계</td>
            <td>낮음</td>
            <td>중간</td>
            <td><span class="severity-badge low">Low</span></td>
            <td><span class="category-badge">성능</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R9</span></td>
            <td>Redis 세션 관리 장애</td>
            <td>낮음</td>
            <td>높음</td>
            <td><span class="severity-badge medium">Medium</span></td>
            <td><span class="category-badge">인프라</span></td>
          </tr>
          <tr>
            <td><span class="risk-id">R10</span></td>
            <td>모노레포 빌드/배포 복잡성</td>
            <td>중간</td>
            <td>낮음</td>
            <td><span class="severity-badge low">Low</span></td>
            <td><span class="category-badge">개발</span></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Risk Details -->
    <section class="risk-details">
      <h2>상세 리스크 분석</h2>

      <!-- R1 -->
      <div class="risk-card critical" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R1</span>
            <h3>이미지 업로드 용량/성능 이슈</h3>
            <span class="severity-badge critical">Critical</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>레시피당 썸네일 1장 + 조리 단계별 이미지 (평균 5-10장)</li>
              <li>고해상도 이미지 업로드 시 스토리지 급증</li>
              <li>이미지 로딩 시간으로 인한 UX 저하</li>
              <li>로컬 스토리지 용량 한계</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>영향 범위</h4>
            <div class="code-block">레시피 1,000개 × 평균 6장 × 5MB = 약 30GB
일일 신규 레시피 50개 가정 시, 월간 약 9GB 증가</div>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - 이미지 리사이징 미들웨어</h4>
            <div class="code-block">import sharp from 'sharp';

async resizeImage(buffer: Buffer, maxWidth = 1200): Promise&lt;Buffer&gt; {
  return sharp(buffer)
    .resize(maxWidth, null, { withoutEnlargement: true })
    .jpeg({ quality: 80 })
    .toBuffer();
}

async generateThumbnail(buffer: Buffer): Promise&lt;Buffer&gt; {
  return sharp(buffer)
    .resize(400, 300, { fit: 'cover' })
    .jpeg({ quality: 70 })
    .toBuffer();
}</div>
          </div>
        </div>
      </div>

      <!-- R2 -->
      <div class="risk-card high" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R2</span>
            <h3>JWT 토큰 보안 취약점</h3>
            <span class="severity-badge high">High</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>Access Token 만료 시간 7일은 과도하게 김</li>
              <li>Refresh Token 탈취 시 장기간 악용 가능</li>
              <li>토큰 블랙리스트 미구현</li>
              <li>XSS 공격 시 localStorage 토큰 노출</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>권장 보안 설정</h4>
            <div class="code-block">JWT_EXPIRES_IN=15m        // Access Token: 15분
JWT_REFRESH_EXPIRES_IN=7d // Refresh Token: 7일</div>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - 토큰 블랙리스트 구현</h4>
            <div class="code-block">async logout(userId: string, accessToken: string) {
  // Refresh Token 삭제
  await this.redisService.del(`refresh:${userId}`);

  // Access Token 블랙리스트 추가
  const decoded = this.jwtService.decode(accessToken);
  const ttl = decoded.exp - Math.floor(Date.now() / 1000);
  if (ttl > 0) {
    await this.redisService.set(`blacklist:${accessToken}`, '1', ttl);
  }
}</div>
          </div>
        </div>
      </div>

      <!-- R3 -->
      <div class="risk-card high" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R3</span>
            <h3>PostgreSQL 단일 장애점 (SPOF)</h3>
            <span class="severity-badge high">High</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>DB 장애 시 전체 서비스 중단</li>
              <li>데이터 백업 정책 미수립</li>
              <li>개발/스테이징/프로덕션 환경 분리 미흡</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - 자동 백업 설정</h4>
            <div class="code-block"># docker-compose.yml에 백업 추가
postgres-backup:
  image: postgres:16-alpine
  depends_on:
    - postgres
  volumes:
    - ./backups:/backups
  entrypoint: |
    sh -c 'while true; do
      pg_dump -h postgres -U recipe_user recipe_share > /backups/backup_$(date +%Y%m%d_%H%M%S).sql
      sleep 21600
    done'</div>
          </div>
        </div>
      </div>

      <!-- R4 -->
      <div class="risk-card high" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R4</span>
            <h3>팀 리소스 부족 (2인 개발)</h3>
            <span class="severity-badge high">High</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>개발자 1명 부재 시 50% 생산성 저하</li>
              <li>코드 리뷰 품질 저하 (상호 리뷰 한계)</li>
              <li>병렬 작업 시 병합 충돌 증가</li>
              <li>번아웃 위험</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - 기능 우선순위 재조정</h4>
            <div class="code-block">P0 (Must): 인증, 레시피 CRUD, 이미지 업로드, 기본 UI
P1 (Should): 검색, 좋아요, 마이페이지
P2 (Could): 댓글, 다크모드, 반응형 완성도
P3 (Won't): 소셜 로그인, 추천, 알림 (MVP 제외)</div>
          </div>
          <div class="risk-section">
            <h4>효율화 전략</h4>
            <ul>
              <li>UI 라이브러리 활용: shadcn/ui, Radix UI</li>
              <li>보일러플레이트 최소화: NestJS CLI, Next.js 템플릿</li>
              <li>테스트 범위 조정: 핵심 로직만 단위 테스트</li>
              <li>주간 스프린트 리뷰로 조기 리스크 감지</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- R5 -->
      <div class="risk-card medium" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R5</span>
            <h3>Next.js 14 App Router 학습 곡선</h3>
            <span class="severity-badge medium">Medium</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>App Router는 Pages Router와 다른 패러다임</li>
              <li>Server Components vs Client Components 혼동</li>
              <li>데이터 페칭 패턴 변화 (getServerSideProps → fetch)</li>
              <li>캐싱 전략 복잡성</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - 컴포넌트 분류 규칙</h4>
            <div class="code-block">## Server Component (기본값)
- 데이터 페칭이 필요한 페이지
- SEO가 중요한 콘텐츠
- 예: 레시피 목록, 상세 페이지

## Client Component ('use client')
- 상태 관리 (useState, useEffect)
- 이벤트 핸들러 (onClick, onChange)
- 브라우저 API 사용
- 예: 좋아요 버튼, 폼, 모달</div>
          </div>
        </div>
      </div>

      <!-- R6 -->
      <div class="risk-card medium" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R6</span>
            <h3>레시피 검색 성능 저하</h3>
            <span class="severity-badge medium">Medium</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>LIKE 쿼리는 인덱스 활용 불가 (앞에 와일드카드)</li>
              <li>레시피 증가 시 검색 속도 저하</li>
              <li>재료 검색 미지원</li>
              <li>한글 형태소 분석 부재</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - PostgreSQL Full-Text Search</h4>
            <div class="code-block">-- Full-Text Search 인덱스
CREATE INDEX idx_recipes_search ON recipes
USING gin(to_tsvector('simple', title || ' ' || description));

-- Prisma raw query
const recipes = await prisma.$queryRaw`
  SELECT * FROM recipes
  WHERE to_tsvector('simple', title || ' ' || description)
        @@ plainto_tsquery('simple', ${search})
  ORDER BY ts_rank(...) DESC
  LIMIT ${limit}
`;</div>
          </div>
        </div>
      </div>

      <!-- R7-R10 abbreviated for space -->
      <div class="risk-card medium" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R7</span>
            <h3>S3 전환 시 마이그레이션 이슈</h3>
            <span class="severity-badge medium">Medium</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>무중단 마이그레이션 전략</h4>
            <ul>
              <li>1. S3 버킷 생성 및 설정</li>
              <li>2. 신규 업로드만 S3로 전환 (STORAGE_TYPE=s3)</li>
              <li>3. 배치로 기존 이미지 S3 복사</li>
              <li>4. DB URL 일괄 업데이트 (트랜잭션)</li>
              <li>5. 로컬 파일 삭제 (검증 후)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="risk-card medium" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R9</span>
            <h3>Redis 세션 관리 장애</h3>
            <span class="severity-badge medium">Medium</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <h4>리스크 설명</h4>
            <ul>
              <li>Redis 장애 시 토큰 갱신 불가</li>
              <li>모든 사용자 로그아웃 상태</li>
              <li>단일 인스턴스 (복제본 없음)</li>
            </ul>
          </div>
          <div class="risk-section">
            <h4>대응 방안 - Fallback 전략</h4>
            <div class="code-block">async refreshToken(refreshToken: string) {
  try {
    const storedToken = await this.redisService.get(`refresh:${payload.sub}`);
    if (storedToken !== refreshToken) {
      throw new UnauthorizedException();
    }
  } catch (error) {
    if (error instanceof RedisConnectionError) {
      // Redis 장애 시 토큰 자체 검증만 수행
      console.warn('Redis unavailable, skipping token store validation');
    } else {
      throw error;
    }
  }
}</div>
          </div>
        </div>
      </div>

      <div class="risk-card low" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R8</span>
            <h3>Prisma ORM 성능 한계</h3>
            <span class="severity-badge low">Low</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <p>MVP 규모에서는 문제없으며, 필요시 Raw Query 사용 가능</p>
          </div>
        </div>
      </div>

      <div class="risk-card low" onclick="toggleRisk(this)">
        <div class="risk-card-header">
          <div class="risk-card-title">
            <span class="risk-id">R10</span>
            <h3>모노레포 빌드/배포 복잡성</h3>
            <span class="severity-badge low">Low</span>
          </div>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="risk-content">
          <div class="risk-section">
            <p>Turborepo 도입 시 해결 가능하며, 현재 규모에서는 관리 가능</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Action Items -->
    <section class="action-items">
      <h2>리스크 대응 우선순위</h2>

      <div class="action-phase immediate">
        <h3>즉시 조치 (개발 중)</h3>
        <table class="action-table">
          <thead>
            <tr>
              <th>순위</th>
              <th>리스크</th>
              <th>조치 사항</th>
              <th>담당</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>R1</td>
              <td>이미지 리사이징 미들웨어 추가</td>
              <td><span class="owner-badge">B</span></td>
            </tr>
            <tr>
              <td>2</td>
              <td>R2</td>
              <td>JWT 만료 시간 단축 (15분/7일)</td>
              <td><span class="owner-badge">B</span></td>
            </tr>
            <tr>
              <td>3</td>
              <td>R4</td>
              <td>기능 우선순위 재조정 (P0~P3)</td>
              <td><span class="owner-badge">A</span> <span class="owner-badge">B</span></td>
            </tr>
            <tr>
              <td>4</td>
              <td>R5</td>
              <td>컴포넌트 분류 컨벤션 문서화</td>
              <td><span class="owner-badge">A</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="action-phase short-term">
        <h3>단기 조치 (테스트 단계)</h3>
        <table class="action-table">
          <thead>
            <tr>
              <th>순위</th>
              <th>리스크</th>
              <th>조치 사항</th>
              <th>담당</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>5</td>
              <td>R2</td>
              <td>토큰 블랙리스트 구현</td>
              <td><span class="owner-badge">B</span></td>
            </tr>
            <tr>
              <td>6</td>
              <td>R6</td>
              <td>PostgreSQL Full-Text Search 적용</td>
              <td><span class="owner-badge">A</span></td>
            </tr>
            <tr>
              <td>7</td>
              <td>R3</td>
              <td>자동 백업 스크립트 구성</td>
              <td><span class="owner-badge">B</span></td>
            </tr>
            <tr>
              <td>8</td>
              <td>R9</td>
              <td>Redis Fallback 로직 추가</td>
              <td><span class="owner-badge">B</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="action-phase pre-launch">
        <h3>런칭 전 조치 (11-12주차)</h3>
        <table class="action-table">
          <thead>
            <tr>
              <th>순위</th>
              <th>리스크</th>
              <th>조치 사항</th>
              <th>담당</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>9</td>
              <td>R7</td>
              <td>S3 마이그레이션 실행</td>
              <td><span class="owner-badge">B</span></td>
            </tr>
            <tr>
              <td>10</td>
              <td>R3</td>
              <td>프로덕션 Managed DB 설정</td>
              <td><span class="owner-badge">A</span></td>
            </tr>
            <tr>
              <td>11</td>
              <td>R1</td>
              <td>CDN 적용</td>
              <td><span class="owner-badge">A</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Monitoring -->
    <section class="monitoring">
      <h2>모니터링 지표</h2>
      <div class="metric-grid">
        <div class="metric-item">
          <div class="metric-info">
            <h4>API 응답 시간</h4>
            <p>평균 응답 속도</p>
          </div>
          <div class="metric-threshold">
            <div class="value">&gt; 500ms</div>
            <span class="alert warning">Warning</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-info">
            <h4>API 에러율</h4>
            <p>5xx 에러 비율</p>
          </div>
          <div class="metric-threshold">
            <div class="value">&gt; 1%</div>
            <span class="alert critical">Critical</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-info">
            <h4>DB 연결 실패</h4>
            <p>PostgreSQL 연결 오류</p>
          </div>
          <div class="metric-threshold">
            <div class="value">&gt; 0</div>
            <span class="alert critical">Critical</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-info">
            <h4>Redis 연결 실패</h4>
            <p>Redis 연결 오류</p>
          </div>
          <div class="metric-threshold">
            <div class="value">&gt; 0</div>
            <span class="alert warning">Warning</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-info">
            <h4>이미지 업로드 실패율</h4>
            <p>업로드 오류 비율</p>
          </div>
          <div class="metric-threshold">
            <div class="value">&gt; 5%</div>
            <span class="alert warning">Warning</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-info">
            <h4>JWT 갱신 실패율</h4>
            <p>토큰 갱신 오류</p>
          </div>
          <div class="metric-threshold">
            <div class="value">&gt; 1%</div>
            <span class="alert warning">Warning</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Conclusion -->
    <section class="conclusion">
      <h2>결론 및 권장사항</h2>
      <div class="conclusion-grid">
        <div class="conclusion-section">
          <h3>핵심 권장사항</h3>
          <ul>
            <li>이미지 처리 강화: 리사이징 필수, CDN 권장</li>
            <li>보안 설정 조정: JWT 만료 15분, 블랙리스트 구현</li>
            <li>기능 범위 조정: P0/P1 집중, P2 선택적</li>
            <li>컨벤션 문서화: App Router, 코드 스타일</li>
          </ul>
        </div>
        <div class="conclusion-section acceptable">
          <h3>수용 가능한 리스크</h3>
          <ul>
            <li>R8 (Prisma 성능): MVP 규모에서 문제없음</li>
            <li>R10 (모노레포 복잡성): Turborepo 도입 시 해결</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <p>작성일: 2026-01-29 | 검토 주기: 스프린트마다 (2주)</p>
    </footer>
  </div>

  <script>
    // Toggle risk card expansion
    function toggleRisk(card) {
      card.classList.toggle('expanded');
    }

    // Severity Chart
    const severityCtx = document.getElementById('severityChart').getContext('2d');
    new Chart(severityCtx, {
      type: 'doughnut',
      data: {
        labels: ['Critical', 'High', 'Medium', 'Low'],
        datasets: [{
          data: [1, 3, 4, 2],
          backgroundColor: [
            'rgba(255, 71, 87, 0.8)',
            'rgba(255, 165, 2, 0.8)',
            'rgba(255, 217, 61, 0.8)',
            'rgba(46, 213, 115, 0.8)'
          ],
          borderColor: [
            '#ff4757',
            '#ffa502',
            '#ffd93d',
            '#2ed573'
          ],
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              color: '#e4e4e4',
              font: {
                family: "'Noto Sans KR', sans-serif",
                size: 12
              },
              padding: 20
            }
          }
        }
      }
    });

    // Category Chart
    const categoryCtx = document.getElementById('categoryChart').getContext('2d');
    new Chart(categoryCtx, {
      type: 'bar',
      data: {
        labels: ['인프라', '보안', '성능', '기능', '기술', '일정', '개발'],
        datasets: [{
          label: '리스크 수',
          data: [3, 1, 2, 1, 1, 1, 1],
          backgroundColor: 'rgba(72, 219, 251, 0.6)',
          borderColor: '#48dbfb',
          borderWidth: 1,
          borderRadius: 8
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        indexAxis: 'y',
        plugins: {
          legend: {
            display: false
          }
        },
        scales: {
          x: {
            beginAtZero: true,
            max: 4,
            ticks: {
              color: '#a0a0a0',
              stepSize: 1,
              font: {
                family: "'Noto Sans KR', sans-serif"
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.1)'
            }
          },
          y: {
            ticks: {
              color: '#e4e4e4',
              font: {
                family: "'Noto Sans KR', sans-serif",
                size: 12
              }
            },
            grid: {
              display: false
            }
          }
        }
      }
    });
  </script>
</body>
</html>
